<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWSPERUTIC - Sistema de Facturacion</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h4>AWSPERUTIC</h4>
        </div>
        
        <div class="user-profile">
            <div class="user-avatar">
                <i class="fas fa-user"></i>
            </div>
            <div class="user-role">Administrador</div>
        </div>

        <ul class="sidebar-menu">
            <li><a href="#"><i class="fas fa-home"></i><span>Inicio</span></a></li>
            <li><a href="#"><i class="fas fa-box"></i><span>Productos y Servicios</span><i class="fas fa-chevron-right chevron"></i></a></li>
            <li class="ventas-item">
    <a href="javascript:void(0)" onclick="toggleVentas()">
        <i class="fas fa-receipt"></i>
        <span>Ventas</span>
        <i class="fas fa-chevron-right chevron" id="ventasChevron"></i>
    </a>

    <!-- SUBMENÚ (COMBO) -->
    <ul class="ventas-submenu" id="ventasSubmenu">
        <li onclick="cargarVista('boleta')">Emitir Boleta</li>
        <li onclick="cargarVista('factura')">Emitir Factura</li>
        <li onclick="cargarVista('notaVenta')">Emitir Nota de Venta</li>
        <li onclick="cargarVista('notaCredito')">Emitir Nota de Crédito</li>
        <li onclick="cargarVista('notaDebito')">Emitir Nota de Débito</li>
    </ul>
</li>
            <li><a href="#"><i class="fas fa-shopping-cart"></i><span>Compras</span><i class="fas fa-chevron-right chevron"></i></a></li>
            <li><a href="#"><i class="fas fa-file-invoice"></i><span>Guia de Remision</span><i class="fas fa-chevron-right chevron"></i></a></li>
            <li><a href="#"><i class="fas fa-cog"></i><span>Cotizaciones</span><i class="fas fa-chevron-right chevron"></i></a></li>
            <li><a href="#"><i class="fas fa-chart-bar"></i><span>Reportes</span><i class="fas fa-chevron-right chevron"></i></a></li>
            <li><a href="#"><i class="fas fa-users"></i><span>Clientes</span><i class="fas fa-chevron-right chevron"></i></a></li>
            <li><a href="#"><i class="fas fa-handshake"></i><span>Consultar comprob.</span><i class="fas fa-chevron-right chevron"></i></a></li>
            <li><a href="#"><i class="fas fa-file-alt"></i><span>Estado SUNAT</span><i class="fas fa-chevron-right chevron"></i></a></li>
            <li><a href="#"><i class="fas fa-book"></i><span>Resumen diario boletas</span><i class="fas fa-chevron-right chevron"></i></a></li>
            <li><a href="#"><i class="fas fa-user-friends"></i><span>Usuarios</span><i class="fas fa-chevron-right chevron"></i></a></li>
            <li><a href="#"><i class="fas fa-wrench"></i><span>Configuracion</span><i class="fas fa-chevron-right chevron"></i></a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="top-bar-left">
                <button class="btn btn-sm btn-secondary"><i class="fas fa-bars"></i></button>
                <button class="btn-pruebas">PRUEBAS</button>
                <i class="fas fa-sun"></i>
                <i class="fas fa-moon"></i>
            </div>
            <div class="top-bar-right">
                <div style="position: relative;">
                    <i class="fas fa-bell"></i>
                    <span class="badge-pill">1</span>
                </div>
                <i class="fas fa-user-circle"></i>
                <span>Usuario</span>
            </div>
        </div>

        <!-- Content Area -->
        <div class="content-area">

        <!-- DASHBOARD -->
<!-- DASHBOARD -->
<div id="vistaDashboard">
    <div style="margin-bottom: 30px;">
        <h3 style="color: #333; font-size: 24px; margin-bottom: 5px;">
            <i class="fas fa-chart-line"></i> Dashboard
        </h3>
        <p style="color: #666; font-size: 14px;">Resumen general del sistema de facturación</p>
    </div>

    <!-- Tarjetas de Estadísticas -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px;">
        
        <!-- Tarjeta 1: Ventas del Día -->
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                <div>
                    <p style="margin: 0; opacity: 0.9; font-size: 13px;">VENTAS DEL DÍA</p>
                    <h2 style="margin: 10px 0 0 0; font-size: 32px; font-weight: bold;">S/ 0.00</h2>
                </div>
                <i class="fas fa-cash-register" style="font-size: 40px; opacity: 0.3;"></i>
            </div>
            <p style="margin: 0; font-size: 12px; opacity: 0.8;">
                <i class="fas fa-arrow-up"></i> 0 comprobantes emitidos
            </p>
        </div>

        <!-- Tarjeta 2: Facturas Emitidas -->
        <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                <div>
                    <p style="margin: 0; opacity: 0.9; font-size: 13px;">FACTURAS</p>
                    <h2 style="margin: 10px 0 0 0; font-size: 32px; font-weight: bold;">0</h2>
                </div>
                <i class="fas fa-file-invoice" style="font-size: 40px; opacity: 0.3;"></i>
            </div>
            <p style="margin: 0; font-size: 12px; opacity: 0.8;">
                <i class="fas fa-check-circle"></i> Este mes
            </p>
        </div>

        <!-- Tarjeta 3: Boletas Emitidas -->
        <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                <div>
                    <p style="margin: 0; opacity: 0.9; font-size: 13px;">BOLETAS</p>
                    <h2 style="margin: 10px 0 0 0; font-size: 32px; font-weight: bold;">0</h2>
                </div>
                <i class="fas fa-receipt" style="font-size: 40px; opacity: 0.3;"></i>
            </div>
            <p style="margin: 0; font-size: 12px; opacity: 0.8;">
                <i class="fas fa-check-circle"></i> Este mes
            </p>
        </div>

        <!-- Tarjeta 4: Total del Mes -->
        <div style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                <div>
                    <p style="margin: 0; opacity: 0.9; font-size: 13px;">TOTAL DEL MES</p>
                    <h2 style="margin: 10px 0 0 0; font-size: 32px; font-weight: bold;">S/ 0.00</h2>
                </div>
                <i class="fas fa-chart-line" style="font-size: 40px; opacity: 0.3;"></i>
            </div>
            <p style="margin: 0; font-size: 12px; opacity: 0.8;">
                <i class="fas fa-calendar-alt"></i> Diciembre 2025
            </p>
        </div>
    </div>

    <!-- Accesos Rápidos -->
    <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); margin-bottom: 30px;">
        <h5 style="color: #333; margin-bottom: 20px; font-size: 18px;">
            <i class="fas fa-bolt"></i> Accesos Rápidos
        </h5>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
            
            <button onclick="cargarVista('factura')" style="background: #0d6efd; color: white; border: none; padding: 15px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; display: flex; align-items: center; gap: 10px; transition: all 0.3s;">
                <i class="fas fa-file-invoice" style="font-size: 20px;"></i>
                <div style="text-align: left;">
                    <div style="font-weight: bold;">Nueva Factura</div>
                    <div style="font-size: 11px; opacity: 0.8;">Emitir factura electrónica</div>
                </div>
            </button>

            <button onclick="cargarVista('boleta')" style="background: #dc3545; color: white; border: none; padding: 15px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; display: flex; align-items: center; gap: 10px; transition: all 0.3s;">
                <i class="fas fa-receipt" style="font-size: 20px;"></i>
                <div style="text-align: left;">
                    <div style="font-weight: bold;">Nueva Boleta</div>
                    <div style="font-size: 11px; opacity: 0.8;">Emitir boleta electrónica</div>
                </div>
            </button>

            <button onclick="cargarVista('notaVenta')" style="background: #6f42c1; color: white; border: none; padding: 15px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; display: flex; align-items: center; gap: 10px; transition: all 0.3s;">
                <i class="fas fa-file-alt" style="font-size: 20px;"></i>
                <div style="text-align: left;">
                    <div style="font-weight: bold;">Nota de Venta</div>
                    <div style="font-size: 11px; opacity: 0.8;">Emitir nota interna</div>
                </div>
            </button>

            <button onclick="alert('Módulo de reportes en desarrollo')" style="background: #28a745; color: white; border: none; padding: 15px 20px; border-radius: 8px; cursor: pointer; font-size: 14px; display: flex; align-items: center; gap: 10px; transition: all 0.3s;">
                <i class="fas fa-chart-bar" style="font-size: 20px;"></i>
                <div style="text-align: left;">
                    <div style="font-weight: bold;">Ver Reportes</div>
                    <div style="font-size: 11px; opacity: 0.8;">Análisis y estadísticas</div>
                </div>
            </button>
        </div>
    </div>

    <!-- Últimos Comprobantes -->
    <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);">
        <h5 style="color: #333; margin-bottom: 20px; font-size: 18px;">
            <i class="fas fa-history"></i> Últimos Comprobantes Emitidos
        </h5>
        <div id="ultimosComprobantes" style="overflow-x: auto;">
            <table style="width: 100%; border-collapse: collapse; font-size: 13px;">
                <thead>
                    <tr style="background: #f8f9fa; border-bottom: 2px solid #dee2e6;">
                        <th style="padding: 12px; text-align: left;">TIPO</th>
                        <th style="padding: 12px; text-align: left;">NÚMERO</th>
                        <th style="padding: 12px; text-align: left;">CLIENTE</th>
                        <th style="padding: 12px; text-align: left;">FECHA</th>
                        <th style="padding: 12px; text-align: right;">TOTAL</th>
                    </tr>
                </thead>
                <tbody id="tablaComprobantes">
                    <tr>
                        <td colspan="5" style="padding: 30px; text-align: center; color: #999;">
                            <i class="fas fa-inbox" style="font-size: 40px; margin-bottom: 10px; display: block;"></i>
                            No hay comprobantes emitidos aún
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<script>
// Cargar últimos comprobantes en el dashboard
function cargarUltimosComprobantes() {
    const comprobantes = JSON.parse(localStorage.getItem('comprobantes')) || [];
    const tabla = document.getElementById('tablaComprobantes');
    
    if (comprobantes.length === 0) {
        tabla.innerHTML = `
            <tr>
                <td colspan="5" style="padding: 30px; text-align: center; color: #999;">
                    <i class="fas fa-inbox" style="font-size: 40px; margin-bottom: 10px; display: block;"></i>
                    No hay comprobantes emitidos aún
                </td>
            </tr>
        `;
        return;
    }
    
    // Mostrar los últimos 5 comprobantes
    const ultimos = comprobantes.slice(-5).reverse();
    
    tabla.innerHTML = ultimos.map(comp => `
        <tr style="border-bottom: 1px solid #eee;">
            <td style="padding: 12px;">
                <span style="background: ${comp.tipo === 'FACTURA' ? '#0d6efd' : comp.tipo === 'BOLETA' ? '#dc3545' : '#6f42c1'}; color: white; padding: 4px 8px; border-radius: 4px; font-size: 11px;">
                    ${comp.tipo}
                </span>
            </td>
            <td style="padding: 12px;">${comp.serie || 'N/A'}-${comp.numero}</td>
            <td style="padding: 12px;">${comp.cliente?.nombre || 'N/A'}</td>
            <td style="padding: 12px;">${comp.fecha || new Date(comp.timestamp).toLocaleDateString()}</td>
            <td style="padding: 12px; text-align: right; font-weight: bold;">S/ ${comp.total?.toFixed(2) || '0.00'}</td>
        </tr>
    `).join('');
}

// Actualizar estadísticas del dashboard
function actualizarEstadisticas() {
    const comprobantes = JSON.parse(localStorage.getItem('comprobantes')) || [];
    
    // Filtrar por mes actual
    const hoy = new Date();
    const mesActual = comprobantes.filter(c => {
        const fechaComp = new Date(c.timestamp);
        return fechaComp.getMonth() === hoy.getMonth() && fechaComp.getFullYear() === hoy.getFullYear();
    });
    
    // Contar facturas y boletas
    const facturas = mesActual.filter(c => c.tipo === 'FACTURA').length;
    const boletas = mesActual.filter(c => c.tipo === 'BOLETA').length;
    
    // Calcular totales
    const totalMes = mesActual.reduce((sum, c) => sum + (c.total || 0), 0);
    
    console.log('Estadísticas actualizadas:', { facturas, boletas, totalMes });
}

// Ejecutar al mostrar el dashboard
if (typeof mostrarDashboard !== 'undefined') {
    const originalMostrarDashboard = mostrarDashboard;
    mostrarDashboard = function() {
        originalMostrarDashboard();
        cargarUltimosComprobantes();
        actualizarEstadisticas();
    };
}
</script>


<!-- VENTAS -->
<div id="vistaVentas" style="display:none;">
            <!-- Invoice Header -->
            <div class="invoice-header">
                <h5><i class="fas fa-file-invoice"></i> NUEVA FACTURA</h5>
                <div class="btn-group-custom">
                    <button class="btn-custom btn-primary-custom">
                        <i class="fas fa-file-invoice"></i> EMITIR FACTURA
                    </button>
                    <button class="btn-custom btn-danger-custom">
                        <i class="fas fa-file-alt"></i> EMITIR BOLETA
                    </button>
                    <button class="btn-custom btn-purple-custom">
                        <i class="fas fa-receipt"></i> NOTA DE VENTA
                    </button>
                </div>
            </div>

            <!-- Form Section -->
            <div class="form-section">
                <div class="form-row">
                    <div class="form-group">
                        <label>Tipo</label>
                        <select class="form-control-custom">
                            <option>Soles (S/)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Serie</label>
                        <select class="form-control-custom">
                            <option>F002</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Fecha</label>
                        <input type="date" class="form-control-custom" value="2025-12-19">
                    </div>
                    <div class="form-group">
                        <label>Vencimiento</label>
                        <input type="date" class="form-control-custom" value="2025-12-19">
                    </div>
                </div>

                <h6 class="section-title">CLIENTE:</h6>

                <div class="form-row">
                    <div class="form-group">
                        <label>Tipo Doc.</label>
                        <select class="form-control-custom">
                            <option>R.U.C.</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Número</label>
                        <div class="input-group">
                            <input type="text" class="form-control-custom" placeholder="Ingrese número de documento...">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Nombre/Razón Social</label>
                        <input type="text" class="form-control-custom" placeholder="Ingrese nombre o razón social...">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Dirección</label>
                        <input type="text" class="form-control-custom" placeholder="Ingrese la dirección...">
                    </div>
                    <div class="form-group">
                        <label>Código Ubigeo</label>
                        <input type="text" class="form-control-custom" placeholder="Ingrese código de ubigeo...">
                    </div>
                    <div class="form-group">
                        <label>Celular</label>
                        <input type="text" class="form-control-custom" placeholder="Ingrese su número de celular...">
                    </div>
                </div>

                <div class="radio-group">
                    <label class="radio-label">¿Deseas Enviar el Comprobante Electrónico al Email del Cliente?</label>
                    <div>
                        <input type="radio" name="email" id="emailSi" checked>
                        <label for="emailSi" class="radio-option">Sí</label>
                        <input type="radio" name="email" id="emailNo">
                        <label for="emailNo" class="radio-option">No</label>
                    </div>
                </div>

                <div class="radio-group">
                    <label class="radio-label">¿Contado o Crédito?</label>
                    <select class="form-control-custom select-small">
                        <option>Contado</option>
                        <option>Crédito</option>
                    </select>
                </div>
            </div>

            <!-- Product Table -->
            <div class="form-section">
                <div class="table-header">
                    <div>CÓDIGO</div>
                    <div>CANTIDAD</div>
                    <div>UNI/MEDIDA</div>
                    <div>DESCRIPCIÓN</div>
                    <div>PRECIO UNITARIO</div>
                    <div>VALOR UNITARIO</div>
                    <div>SUB.TOTAL</div>
                </div>
                <div class="table-discount">DESCUENTO</div>
                <div class="table-row">
                    <div class="toggle-switch">
                        <div class="switch active" onclick="this.classList.toggle('active')"></div>
                    </div>
                    <div>
                        <input type="number" class="form-control-custom" value="0" min="0">
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-custom btn-primary-custom">
                        <i class="fas fa-shopping-cart"></i> AGREGAR PRODUCTOS O SERVICIOS
                    </button>
                    <button class="btn-custom btn-info-custom">
                        <i class="fas fa-plus"></i> NUEVO PRODUCTO O SERVICIO
                    </button>
                </div>
            </div>

            <!-- Payment and Summary -->
            <div class="form-section">
                <div class="form-group">
                    <label>Método de Pago:</label>
                    <select class="form-control-custom select-medium">
                        <option>En efectivo</option>
                    </select>
                </div>

                <div class="form-group observaciones-group">
                    <label>Observaciones</label>
                    <textarea class="form-control-custom" rows="4" placeholder="Ingrese observaciones..."></textarea>
                </div>

                <div class="summary-box">
                    <h6 class="summary-title">RESUMEN</h6>
                    <div class="summary-row">
                        <span>DESCUENTO (-):</span>
                        <span>0.00</span>
                    </div>
                    <div class="summary-row">
                        <span>IGV(18%):</span>
                        <span>0.00</span>
                    </div>
                    <div class="summary-row total">
                        <span>TOTAL:</span>
                        <span>0.00</span>
                    </div>
                </div>

                <div class="footer-buttons">
                    <button class="btn-footer btn-region-no">
                        <i class="fas fa-times"></i> ¿Bienes Región Selva? NO
                    </button>
                    <button class="btn-footer btn-region-yes">
                        <i class="fas fa-check"></i> ¿Servicios Región Selva? NO
                    </button>
                </div>
               </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script src="ventas.js"></script>

</body>
</html>
